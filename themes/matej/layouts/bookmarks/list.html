{{ define "main" }}
<div class="main-container">
    {{ partial "profile.html" . }}

    <div class="content-area">
        {{ $bookmarks := .Site.Data.bookmarks }}
        {{ $groups := slice }}

        <!-- Collect unique groups -->
        {{ range $bookmarks }}
        {{ $group := .group | default "uncategorized" }}
        {{ if not (in $groups $group) }}
        {{ $groups = $groups | append $group }}
        {{ end }}
        {{ end }}

        <div class="bookmarks-groups">
            {{ range $groups }}
            {{ $currentGroup := . }}
            <div class="content-group">
                <h2 class="group-title">{{ $currentGroup }}</h2>

                {{ range $bookmarks }}
                {{ if eq (.group | default "uncategorized") $currentGroup }}
                <article class="bookmark-item">
                    {{ $domain := urls.Parse .url }}
                    {{ $faviconUrl := printf "https://www.google.com/s2/favicons?domain=%s&sz=32" $domain.Host }}
                    <img src="{{ $faviconUrl }}" alt="{{ .description }}" class="bookmark-icon">

                    <div class="bookmark-info">
                        {{ with .date }}
                        <div class="bookmark-date">{{ . }}</div>
                        {{ end }}
                        <div class="bookmark-description">{{ .description }}</div>
                        <a href="{{ .url }}" class="bookmark-url" target="_blank" rel="noopener">{{ .url }}</a>
                    </div>
                </article>
                {{ end }}
                {{ end }}
            </div>
            {{ end }}
        </div>
    </div>
</div>
{{ end }}